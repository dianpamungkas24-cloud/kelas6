<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Portal Kelas 6</title>
    <link rel="stylesheet" href="../assets/css/admin.css">
    <link rel="icon" href="../assets/image/logo.png">
    <style>
        .admin-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .admin-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .admin-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background: #2980b9;
        }
        
        .nav-btn.active {
            background: #2c3e50;
        }
        
        .admin-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        
        .login-section {
            max-width: 400px;
            margin: 100px auto;
            text-align: center;
        }
        
        .login-input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #2ecc71;
            color: white;
        }
        
        .btn-primary:hover {
            background: #27ae60;
        }
        
        .btn-secondary {
            background: #3498db;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #2980b9;
        }
        
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background: #3498db;
            color: white;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .action-btn {
            padding: 5px 10px;
            margin: 0 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .edit-btn {
            background: #f39c12;
            color: white;
        }
        
        .delete-btn {
            background: #e74c3c;
            color: white;
        }
        
        .status {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <!-- Login Section -->
        <div id="login-section" class="login-section">
            <h1>Admin Login</h1>
            <p>Masukkan password untuk mengakses panel admin</p>
            <input type="password" 
                   id="admin-password" 
                   class="login-input" 
                   placeholder="Password">
            <input type="text"
                   id="github-token"
                   class="login-input"
                   placeholder="GitHub Token (opsional)">
            <button class="login-btn" onclick="login()">Login</button>
            <p style="margin-top: 20px; color: #666; font-size: 14px;">
                GitHub Token diperlukan untuk upload file ke repository
            </p>
        </div>
        
        <!-- Admin Panel (Tersembunyi sampai login) -->
        <div id="admin-panel" style="display: none;">
            <div class="admin-header">
                <h1>Admin Panel - Portal Kelas 6</h1>
                <p>Kelola konten website melalui panel ini</p>
                <button onclick="logout()" style="
                    background: #e74c3c;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 5px;
                    cursor: pointer;
                    margin-top: 10px;
                ">Logout</button>
            </div>
            
            <!-- Navigation -->
            <div class="admin-nav">
                <button class="nav-btn active" onclick="showSection('dashboard')">üìä Dashboard</button>
                <button class="nav-btn" onclick="showSection('jadwal')">üìÖ Jadwal</button>
                <button class="nav-btn" onclick="showSection('galeri')">üñºÔ∏è Galeri</button>
                <button class="nav-btn" onclick="showSection('pengumuman')">üì¢ Pengumuman</button>
                <button class="nav-btn" onclick="showSection('kuis')">üß† Kuis</button>
                <button class="nav-btn" onclick="showSection('backup')">üíæ Backup</button>
            </div>
            
            <!-- Content Sections -->
            <div class="admin-content">
                <!-- Dashboard -->
                <div id="dashboard-section" class="section active">
                    <h2>Dashboard</h2>
                    <div class="stats-grid" style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 20px;
                        margin: 30px 0;
                    ">
                        <div style="
                            background: #3498db;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                            text-align: center;
                        ">
                            <h3 style="margin: 0 0 10px 0;">Pengumuman</h3>
                            <p id="stat-pengumuman" style="font-size: 36px; margin: 0;">0</p>
                        </div>
                        <div style="
                            background: #2ecc71;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                            text-align: center;
                        ">
                            <h3 style="margin: 0 0 10px 0;">Foto Galeri</h3>
                            <p id="stat-galeri" style="font-size: 36px; margin: 0;">0</p>
                        </div>
                        <div style="
                            background: #f39c12;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                            text-align: center;
                        ">
                            <h3 style="margin: 0 0 10px 0;">Soal Kuis</h3>
                            <p id="stat-kuis" style="font-size: 36px; margin: 0;">0</p>
                        </div>
                        <div style="
                            background: #9b59b6;
                            color: white;
                            padding: 20px;
                            border-radius: 10px;
                            text-align: center;
                        ">
                            <h3 style="margin: 0 0 10px 0;">Leaderboard</h3>
                            <p id="stat-leaderboard" style="font-size: 36px; margin: 0;">0</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h3>Status Sistem</h3>
                        <div id="system-status"></div>
                    </div>
                </div>
                
                <!-- Jadwal Management -->
                <div id="jadwal-section" class="section">
                    <h2>Kelola Jadwal</h2>
                    <p>Upload file gambar jadwal baru (.jpg/.png)</p>
                    
                    <div class="form-group">
                        <label for="jadwal-file">File Jadwal</label>
                        <input type="file" 
                               id="jadwal-file" 
                               accept=".jpg,.jpeg,.png"
                               onchange="previewJadwal(event)">
                    </div>
                    
                    <div id="jadwal-preview" style="
                        margin: 20px 0;
                        max-width: 300px;
                        display: none;
                    ">
                        <img id="preview-image" src="" alt="Preview Jadwal" style="
                            width: 100%;
                            border: 2px solid #ddd;
                            border-radius: 5px;
                        ">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="uploadJadwal()">
                            üì§ Upload Jadwal
                        </button>
                    </div>
                    
                    <div id="jadwal-status" style="margin-top: 20px;"></div>
                </div>
                
                <!-- Galeri Management -->
                <div id="galeri-section" class="section">
                    <h2>Kelola Galeri Foto</h2>
                    <p>Upload foto ke galeri (.jpg/.png)</p>
                    
                    <div class="form-group">
                        <label for="galeri-files">Pilih Foto</label>
                        <input type="file" 
                               id="galeri-files" 
                               accept=".jpg,.jpeg,.png"
                               multiple>
                    </div>
                    
                    <div class="form-group">
                        <label for="foto-kategori">Kategori (opsional)</label>
                        <input type="text" 
                               id="foto-kategori" 
                               placeholder="Contoh: Kegiatan, Belajar, Acara">
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="uploadGaleri()">
                            üì§ Upload Foto
                        </button>
                    </div>
                    
                    <div id="upload-progress" style="margin-top: 20px;"></div>
                    
                    <div style="margin-top: 40px;">
                        <h3>Foto yang Telah Diupload</h3>
                        <div id="galeri-list" style="
                            display: grid;
                            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                            gap: 15px;
                            margin-top: 20px;
                        "></div>
                    </div>
                </div>
                
                <!-- Pengumuman Management -->
                <div id="pengumuman-section" class="section">
                    <h2>Kelola Pengumuman</h2>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="showPengumumanForm()">
                            ‚ûï Tambah Pengumuman
                        </button>
                    </div>
                    
                    <!-- Form Pengumuman -->
                    <div id="pengumuman-form" style="
                        display: none;
                        margin-top: 30px;
                        padding: 20px;
                        background: #f8f9fa;
                        border-radius: 10px;
                    ">
                        <h3 id="form-title">Tambah Pengumuman Baru</h3>
                        
                        <div class="form-group">
                            <label for="pengumuman-judul">Judul</label>
                            <input type="text" 
                                   id="pengumuman-judul"
                                   placeholder="Masukkan judul pengumuman">
                        </div>
                        
                        <div class="form-group">
                            <label for="pengumuman-konten">Konten</label>
                            <textarea id="pengumuman-konten" 
                                      placeholder="Tulis isi pengumuman di sini..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="pengumuman-kategori">Kategori</label>
                            <input type="text" 
                                   id="pengumuman-kategori"
                                   placeholder="Contoh: Akademik, Acara, Penting">
                        </div>
                        
                        <div class="form-group">
                            <label for="pengumuman-lampiran">Link Lampiran (opsional)</label>
                            <input type="text" 
                                   id="pengumuman-lampiran"
                                   placeholder="https://...">
                        </div>
                        
                        <input type="hidden" id="pengumuman-id">
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="savePengumuman()">
                                üíæ Simpan Pengumuman
                            </button>
                            <button class="btn" onclick="cancelPengumumanForm()" style="
                                background: #95a5a6;
                                color: white;
                            ">
                                ‚ùå Batal
                            </button>
                        </div>
                    </div>
                    
                    <!-- Daftar Pengumuman -->
                    <div style="margin-top: 40px;">
                        <h3>Daftar Pengumuman</h3>
                        <div id="pengumuman-list" class="table-container"></div>
                    </div>
                </div>
                
                <!-- Kuis Management -->
                <div id="kuis-section" class="section">
                    <h2>Kelola Soal Kuis</h2>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="showKuisForm()">
                            ‚ûï Tambah Soal
                        </button>
                    </div>
                    
                    <!-- Form Kuis -->
                    <div id="kuis-form" style="
                        display: none;
                        margin-top: 30px;
                        padding: 20px;
                        background: #f8f9fa;
                        border-radius: 10px;
                    ">
                        <h3 id="kuis-form-title">Tambah Soal Kuis</h3>
                        
                        <div class="form-group">
                            <label for="kuis-pertanyaan">Pertanyaan</label>
                            <textarea id="kuis-pertanyaan" 
                                      placeholder="Masukkan pertanyaan kuis"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Pilihan Jawaban</label>
                            <input type="text" 
                                   id="pilihan1"
                                   placeholder="Pilihan A"
                                   style="margin-bottom: 10px;">
                            <input type="text" 
                                   id="pilihan2"
                                   placeholder="Pilihan B"
                                   style="margin-bottom: 10px;">
                            <input type="text" 
                                   id="pilihan3"
                                   placeholder="Pilihan C"
                                   style="margin-bottom: 10px;">
                            <input type="text" 
                                   id="pilihan4"
                                   placeholder="Pilihan D">
                        </div>
                        
                        <div class="form-group">
                            <label for="jawaban-benar">Jawaban Benar</label>
                            <select id="jawaban-benar">
                                <option value="0">Pilihan A</option>
                                <option value="1">Pilihan B</option>
                                <option value="2">Pilihan C</option>
                                <option value="3">Pilihan D</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="kuis-penjelasan">Penjelasan (opsional)</label>
                            <textarea id="kuis-penjelasan" 
                                      placeholder="Penjelasan jawaban yang benar"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="kuis-kategori">Kategori</label>
                            <input type="text" 
                                   id="kuis-kategori"
                                   placeholder="Contoh: Matematika, IPA">
                        </div>
                        
                        <input type="hidden" id="kuis-id">
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="saveKuis()">
                                üíæ Simpan Soal
                            </button>
                            <button class="btn" onclick="cancelKuisForm()" style="
                                background: #95a5a6;
                                color: white;
                            ">
                                ‚ùå Batal
                            </button>
                        </div>
                    </div>
                    
                    <!-- Daftar Soal -->
                    <div style="margin-top: 40px;">
                        <h3>Daftar Soal Kuis</h3>
                        <div id="kuis-list" class="table-container"></div>
                    </div>
                </div>
                
                <!-- Backup Management -->
                <div id="backup-section" class="section">
                    <h2>Backup & Restore</h2>
                    
                    <div style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                        gap: 20px;
                        margin-top: 30px;
                    ">
                        <!-- Backup -->
                        <div style="
                            padding: 20px;
                            background: #f8f9fa;
                            border-radius: 10px;
                        ">
                            <h3>üíæ Backup Data</h3>
                            <p>Unduh semua data dalam format JSON</p>
                            <button class="btn btn-primary" onclick="backupData()">
                                üì• Backup Sekarang
                            </button>
                        </div>
                        
                        <!-- Restore -->
                        <div style="
                            padding: 20px;
                            background: #f8f9fa;
                            border-radius: 10px;
                        ">
                            <h3>üîÑ Restore Data</h3>
                            <p>Upload file JSON untuk restore data</p>
                            <div class="form-group">
                                <input type="file" 
                                       id="backup-file"
                                       accept=".json">
                            </div>
                            <button class="btn btn-secondary" onclick="restoreData()">
                                üì§ Restore Data
                            </button>
                        </div>
                        
                        <!-- Reset -->
                        <div style="
                            padding: 20px;
                            background: #fff3cd;
                            border-radius: 10px;
                            border: 2px solid #ffeaa7;
                        ">
                            <h3>‚ö†Ô∏è Reset Data</h3>
                            <p>Reset semua data ke keadaan awal</p>
                            <button class="btn" onclick="resetData()" style="
                                background: #e74c3c;
                                color: white;
                            ">
                                üîÑ Reset Semua Data
                            </button>
                            <p style="margin-top: 10px; font-size: 12px; color: #666;">
                                Peringatan: Tindakan ini tidak dapat dibatalkan!
                            </p>
                        </div>
                    </div>
                    
                    <!-- Status -->
                    <div id="backup-status" style="margin-top: 30px;"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="../assets/js/admin.js"></script>
</body>
</html>